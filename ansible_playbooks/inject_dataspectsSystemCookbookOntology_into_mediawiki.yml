---

- hosts: localhost
  gather_facts: False
  tasks:

    - name: inject_dataspectsSystemCoreOntology_into_mediawiki.rb
      template:
        src: ../scripts/inject_dataspectsSystemCoreOntology_into_mediawiki.rb
        dest: "{{ dataspectsSystem_path_on_host }}/workspace/inject_dataspectsSystemCoreOntology_into_mediawiki.rb"
        mode: 0777
      tags:
        - inject_dataspectsSystemCoreOntology

    # [[IsOperationType::RunDockerContainer]]
    - name: Inject dataspectsSystemCoreOntology into mediawiki
      shell: docker run \
              --volume {{ dataspectsSystem_path_on_host }}/dataspects_lib:/usr/src/dataspects_lib \
              --volume {{ dataspectsSystem_path_on_host }}/workspace:/usr/src/workspace \
              --workdir /usr/src/dataspects_lib \
              --network dataspectsstandardsystem_default \
              --ip 172.21.0.99 \
              --rm \
                dataspects/dataspects:{{ dataspects_version }} \
                  bundle exec bin/dataspects \
                    --profile /usr/src/workspace/standard_system_profiles.yml \
                      manage /usr/src/workspace/inject_dataspectsSystemCoreOntology_into_mediawiki.rb
      ignore_errors: yes
      become: true
      tags:
        - inject_dataspectsSystemCoreOntology

# sudo docker run \
#   --network dataspects_net \
#   --ip 172.20.0.12 \
#   --volume /media/lex/LEXSAMSUNG-64GB/dataspectsSystem/docker_image_factory/dataspects/:/usr/src/docker_image_factory/dataspects/ \
#   --volume /home/lex/dataspectsStandardSystem/:/usr/src/workspace/ \
#   --workdir /usr/src/docker_image_factory/dataspects/dataspects_lib \
#   --rm \
#     dataspects/dataspects:181029a \
#       bundle exec bin/dataspects \
#         --profile /usr/src/workspace/standard_system_profiles.yml \
#           manage /usr/src/workspace/inject_dataspectsSystemCoreOntology_into_mediawiki.rb
